(function(){"use strict";let o,d=1,s={width:0,height:0},w,M=!1;function x(t,l,r,i,f){return Math.max((t-l)*(f-i)/(r-l)+i,0)}function b(t){M=!0,t.scale(d,d);function l(){t.clearRect(0,0,s.width,s.height)}const r=[];function i(){const a=Math.max(s.width,s.height)/640,n=Math.floor(Math.random()*s.width),u=Math.floor(Math.random()*s.height),p=0,h=0,e=(a*.35+.35)*Math.random()+.3,g=Math.random()*.25+.75,m=Math.random()*.75+.5,y=(Math.random()-.5)*.1,X=(Math.random()-1.15)*.2,Y=Math.random()>.4;return{x:n,y:u,translateX:p,translateY:h,size:e,alpha:g,targetAlpha:m,dx:y,dy:X,white:Y}}function f(a,n=!1){t.save();const{x:u,y:p,translateX:h,translateY:e,size:g,alpha:m,white:y}=a;t.translate(h,e),t.beginPath(),t.arc(u,p,g,0,2*Math.PI),t.fillStyle=y?`rgba(255, 255, 255, ${m})`:`rgba(190, 131, 84, ${m})`,t.fill(),n||r.push(a),t.restore()}function C(){for(let a=0;a<80;a++){const n=i();f(n)}}function z(){l(),M&&(r.forEach((a,n)=>{const p=[a.x+a.translateX-a.size,s.width-a.x-a.translateX-a.size,a.y+a.translateY-a.size,s.height-a.y-a.translateY-a.size].reduce((e,g)=>Math.min(e,g)),h=x(p,0,20,0,1);if(h>1?(a.alpha+=.02,a.alpha>a.targetAlpha&&(a.alpha=a.targetAlpha)):a.alpha=a.targetAlpha*h,a.x+=a.dx,a.y+=a.dy,a.x<-a.size||a.x>s.width+a.size||a.y<-a.size||a.y>s.height+a.size){r.splice(n,1);const e=i();f(e)}else f({...a,x:a.x,y:a.y,translateX:a.translateX,translateY:a.translateY,alpha:a.alpha},!0)}),self.requestAnimationFrame(z))}C(),z()}onmessage=t=>{switch(t.data.type){case"new":o=t.data.canvas,d=t.data.dpr;break;case"resize":o&&(s=t.data.parentSize,o.width=s.width*d,o.height=s.height*d,w=o.getContext("2d"));break;case"start":w&&b(w);break;case"stop":M=!1;break}}})();
