(function(){"use strict";const l=self,b=60;let d,f=1,s={width:0,height:0},m,p;function x(t,h,u,o,w){return Math.max((t-h)*(w-o)/(u-h)+o,0)}function z(t){t.clearRect(0,0,s.width,s.height)}function X(t){const h=[];function u(){const a=Math.max(s.width,s.height)/640,n=Math.floor(Math.random()*s.width),M=Math.floor(Math.random()*s.height),g=0,r=0,e=(a*.35+.35)*Math.random()+.3,i=Math.random()*.25+.75,y=Math.random()*.75+.5,Y=(Math.random()-.5)*.1,C=(Math.random()-1.15)*.2,k=Math.random()>.4,A={x:n,y:M,translateX:g,translateY:r,size:e,alpha:i,targetAlpha:y,dx:Y,dy:C,white:k};return h.push(A),A}function o(a){const{x:n,y:M,translateX:g,translateY:r,size:e,alpha:i,white:y}=a;t.save(),t.translate(g,r),t.beginPath(),t.arc(n,M,e,1,2*Math.PI),t.fillStyle=y?`rgba(255, 255, 255, ${i})`:`rgba(190, 131, 84, ${i})`,t.fill(),t.restore()}function w(){t.resetTransform(),t.scale(f,f),t&&z(t),h.forEach((a,n)=>{const g=[a.x+a.translateX-a.size,s.width-a.x-a.translateX-a.size,a.y+a.translateY-a.size,s.height-a.y-a.translateY-a.size].reduce((e,i)=>Math.min(e,i)),r=x(g,0,20,0,1);if(r>1?(a.alpha+=.02,a.alpha>a.targetAlpha&&(a.alpha=a.targetAlpha)):a.alpha=a.targetAlpha*r,a.x+=a.dx,a.y+=a.dy,a.x<-a.size||a.x>s.width+a.size||a.y<-a.size||a.y>s.height+a.size){h.splice(n,1);const e=u();o(e)}else o({...a,x:a.x,y:a.y,translateX:a.translateX,translateY:a.translateY,alpha:a.alpha})}),p=l.requestAnimationFrame(w)}p=requestAnimationFrame(()=>{for(let a=0;a<b;a++){const n=u();o(n)}p=l.requestAnimationFrame(w)})}l.onmessage=t=>{switch(t.data.type){case"new":d=t.data.canvas;break;case"resize":f=t.data.dpr/2,d&&(s=t.data.parentSize,d.width=s.width*f,d.height=s.height*f,m=d.getContext("2d"));break;case"start":m&&X(m);break;case"stop":p&&(l.cancelAnimationFrame(p),m&&z(m));break}}})();
