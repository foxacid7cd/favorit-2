(function(){"use strict";let n,t={width:0,height:0},r=1,m=!1;function x(){n&&(n.width=t.width*r,n.height=t.height*r)}function C(e,s,g,h,u){return Math.max((e-s)*(u-h)/(g-s)+h,0)}function w(e,s){m=!0,s.scale(r,r);function g(){s.clearRect(0,0,t.width,t.height)}const h=[];function u(){const a=Math.max(t.width,t.height)/1e3,o=Math.floor(Math.random()*t.width*1.1-t.width*.05),l=Math.floor(Math.random()*t.height*1.1-t.height*.05),p=0,i=0,d=a*Math.random()+.15,f=Math.random()*.5+.25,M=Math.random()*.5+.25,X=(Math.random()-.5)*.3,Y=(Math.random()-1)*.3,k=.1+Math.random()*4;return{x:o,y:l,translateX:p,translateY:i,size:d,alpha:f,targetAlpha:M,dx:X,dy:Y,magnetism:k}}function z(a,o=!1){s.save();const{x:l,y:p,translateX:i,translateY:d,size:f,alpha:M}=a;s.translate(i,d),s.beginPath(),s.arc(l,p,f,0,2*Math.PI),s.fillStyle=`rgba(255, 255, 255, ${M})`,s.fill(),o||h.push(a),s.restore()}function b(){for(let a=0;a<300;a++){const o=u();z(o)}}b();function y(){g(),m&&(h.forEach((a,o)=>{const p=[a.x+a.translateX-a.size,t.width-a.x-a.translateX-a.size,a.y+a.translateY-a.size,t.height-a.y-a.translateY-a.size].reduce((d,f)=>Math.min(d,f)),i=C(p,0,20,0,1);if(i>1?(a.alpha+=.02,a.alpha>a.targetAlpha&&(a.alpha=a.targetAlpha)):a.alpha=a.targetAlpha*i,a.x+=a.dx,a.y+=a.dy,a.x<-a.size||a.x>t.width+a.size||a.y<-a.size||a.y>t.height+a.size){h.splice(o,1);const d=u();z(d)}else z({...a,x:a.x,y:a.y,translateX:a.translateX,translateY:a.translateY,alpha:a.alpha},!0)}),self.requestAnimationFrame(y))}y()}onmessage=e=>{switch(e.data.type){case"new":n=e.data.canvas,t=e.data.parentSize,r=e.data.dpr,x();const s=n.getContext("2d");w(n,s);break;case"resize":t=e.data.parentSize,r=e.data.dpr,x();const g=n.getContext("2d");w(n,g);break;case"start":const h=n.getContext("2d");w(n,h);break;case"stop":m=!1;break}}})();
