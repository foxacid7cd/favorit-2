(function(){"use strict";let d,m=1,s={width:0,height:0},p,f;function A(t,h,l,o,u){return Math.max((t-h)*(u-o)/(l-h)+o,0)}function y(t){t.clearRect(0,0,s.width,s.height)}function b(t){const h=[];function l(){const a=Math.max(s.width,s.height)/640,n=Math.floor(Math.random()*s.width),w=Math.floor(Math.random()*s.height),g=0,r=0,e=(a*.35+.35)*Math.random()+.3,i=Math.random()*.25+.75,M=Math.random()*.75+.5,x=(Math.random()-.5)*.1,C=(Math.random()-1.15)*.2,X=Math.random()>.4,z={x:n,y:w,translateX:g,translateY:r,size:e,alpha:i,targetAlpha:M,dx:x,dy:C,white:X};return h.push(z),z}function o(a){const{x:n,y:w,translateX:g,translateY:r,size:e,alpha:i,white:M}=a;t.save(),t.translate(g,r),t.beginPath(),t.arc(n,w,e,1,2*Math.PI),t.fillStyle=M?`rgba(255, 255, 255, ${i})`:`rgba(190, 131, 84, ${i})`,t.fill(),t.restore()}function u(){t.resetTransform(),t.scale(m,m),t&&y(t),h.forEach((a,n)=>{const g=[a.x+a.translateX-a.size,s.width-a.x-a.translateX-a.size,a.y+a.translateY-a.size,s.height-a.y-a.translateY-a.size].reduce((e,i)=>Math.min(e,i)),r=A(g,0,20,0,1);if(r>1?(a.alpha+=.02,a.alpha>a.targetAlpha&&(a.alpha=a.targetAlpha)):a.alpha=a.targetAlpha*r,a.x+=a.dx,a.y+=a.dy,a.x<-a.size||a.x>s.width+a.size||a.y<-a.size||a.y>s.height+a.size){h.splice(n,1);const e=l();o(e)}else o({...a,x:a.x,y:a.y,translateX:a.translateX,translateY:a.translateY,alpha:a.alpha})}),f=requestAnimationFrame(u)}f=requestAnimationFrame(()=>{for(let a=0;a<60;a++){const n=l();o(n)}f=requestAnimationFrame(u)})}onmessage=t=>{switch(t.data.type){case"new":d=t.data.canvas;break;case"resize":m=t.data.dpr,d&&(s=t.data.parentSize,d.width=s.width*m,d.height=s.height*m,p=d.getContext("2d"));break;case"start":p&&b(p);break;case"stop":f&&(cancelAnimationFrame(f),p&&y(p));break}}})();
