(function(){"use strict";let o,d=1,s={width:0,height:0},u,w=!1;function z(t,l,r,i,f){return Math.max((t-l)*(f-i)/(r-l)+i,0)}function x(t){w=!0,t.scale(d,d);function l(){t.clearRect(0,0,s.width,s.height)}const r=[];function i(){const a=Math.max(s.width,s.height)/1e3,n=Math.floor(Math.random()*s.width*1.1-s.width*.05),m=Math.floor(Math.random()*s.height*1.1-s.height*.05),g=0,h=0,e=(a*.75+.25)*Math.random()+.1,p=Math.random()*.5+.35,M=Math.random()*.5+.25,b=(Math.random()-.5)*.35,X=(Math.random()-1)*.35,Y=.1+Math.random()*4;return{x:n,y:m,translateX:g,translateY:h,size:e,alpha:p,targetAlpha:M,dx:b,dy:X,magnetism:Y}}function f(a,n=!1){t.save();const{x:m,y:g,translateX:h,translateY:e,size:p,alpha:M}=a;t.translate(h,e),t.beginPath(),t.arc(m,g,p,0,2*Math.PI),t.fillStyle=`rgba(255, 255, 255, ${M})`,t.fill(),n||r.push(a),t.restore()}function C(){for(let a=0;a<100;a++){const n=i();f(n)}}function y(){l(),w&&(r.forEach((a,n)=>{const g=[a.x+a.translateX-a.size,s.width-a.x-a.translateX-a.size,a.y+a.translateY-a.size,s.height-a.y-a.translateY-a.size].reduce((e,p)=>Math.min(e,p)),h=z(g,0,20,0,1);if(h>1?(a.alpha+=.02,a.alpha>a.targetAlpha&&(a.alpha=a.targetAlpha)):a.alpha=a.targetAlpha*h,a.x+=a.dx,a.y+=a.dy,a.x<-a.size||a.x>s.width+a.size||a.y<-a.size||a.y>s.height+a.size){r.splice(n,1);const e=i();f(e)}else f({...a,x:a.x,y:a.y,translateX:a.translateX,translateY:a.translateY,alpha:a.alpha},!0)}),self.requestAnimationFrame(y))}C(),y()}onmessage=t=>{switch(t.data.type){case"new":o=t.data.canvas,d=t.data.dpr;break;case"resize":o&&(s=t.data.parentSize,o.width=s.width*d,o.height=s.height*d,u=o.getContext("2d"));break;case"start":u&&x(u);break;case"stop":w=!1;break}}})();
